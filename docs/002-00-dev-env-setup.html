<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-27T21:45:01.488874"><title>Chapitre 2 : Mise en Place de l'Environnement de D&eacute;veloppement | Behaviour driven dev</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-b-tir-sur-des-fondations-solides","level":0,"title":"Introduction : Bâtir sur des fondations solides","anchor":"#introduction-b-tir-sur-des-fondations-solides"},{"id":"1-cr-ation-du-projet-spring-boot-biblioth-que","level":0,"title":"1. Création du projet Spring Boot \"Bibliothèque\"","anchor":"#1-cr-ation-du-projet-spring-boot-biblioth-que"},{"id":"2-ajout-des-d-pendances-cucumber","level":0,"title":"2. Ajout des dépendances Cucumber","anchor":"#2-ajout-des-d-pendances-cucumber"},{"id":"3-structure-du-projet-pour-le-bdd","level":0,"title":"3. Structure du projet pour le BDD","anchor":"#3-structure-du-projet-pour-le-bdd"},{"id":"4-cr-ation-du-lanceur-de-tests-test-runner","level":0,"title":"4. Création du Lanceur de Tests (Test Runner)","anchor":"#4-cr-ation-du-lanceur-de-tests-test-runner"},{"id":"5-pr-paration-du-projet-fil-rouge","level":0,"title":"5. Préparation du projet fil rouge","anchor":"#5-pr-paration-du-projet-fil-rouge"},{"id":"exercice-3-lancer-le-premier-test-qui-chouera","level":0,"title":"Exercice 3 : Lancer le premier test (qui échouera)","anchor":"#exercice-3-lancer-le-premier-test-qui-chouera"},{"id":"correction-exercice-3","level":0,"title":"Correction exercice 3","anchor":"#correction-exercice-3"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion-de-ce-deuxi-me-chapitre","level":0,"title":"Conclusion de ce deuxième chapitre","anchor":"#conclusion-de-ce-deuxi-me-chapitre"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Chapitre 2 : Mise en Place de l'Environnement de D&eacute;veloppement | Behaviour driven dev"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Behaviour driven dev Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/002-00-dev-env-setup.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Chapitre 2 : Mise en Place de l'Environnement de D&eacute;veloppement | Behaviour driven dev"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/002-00-dev-env-setup.html#webpage",
    "url": "writerside-documentation/002-00-dev-env-setup.html",
    "name": "Chapitre 2 : Mise en Place de l'Environnement de D&eacute;veloppement | Behaviour driven dev",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Behaviour driven dev Help"
}</script><!-- End Schema.org --></head><body data-id="002-00-dev-env-setup" data-main-title="Chapitre 2 : Mise en Place de l'Environnement de Développement" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Behaviour driven dev  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="002-00-dev-env-setup" id="002-00-dev-env-setup.md">Chapitre 2 : Mise en Place de l'Environnement de Développement</h1><p id="b9eici_3">Bienvenue dans le &quot;garage&quot; ! Nous avons les plans de la voiture (nos connaissances en BDD et Gherkin), il est maintenant temps de rassembler les outils et de monter le ch&acirc;ssis. Ce chapitre est fondamental. Une bonne configuration de projet est la garantie d'un d&eacute;veloppement fluide et sans frustration.</p><p id="b9eici_4">Nous allons cr&eacute;er un projet Spring Boot de A &agrave; Z, y int&eacute;grer Cucumber, et structurer notre code pour qu'il soit pr&ecirc;t &agrave; accueillir nos futurs tests.</p><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs p&eacute;dagogiques</h2><p id="b9eici_16">&Agrave; la fin de ce chapitre, vous serez capable de :</p><ul class="list _bullet" id="b9eici_17"><li class="list__item" id="b9eici_18"><p id="b9eici_24"><span class="control" id="b9eici_25">G&eacute;n&eacute;rer</span> un projet Spring Boot avec les d&eacute;pendances initiales via <code class="code" id="b9eici_26">start.spring.io</code>.</p></li><li class="list__item" id="b9eici_19"><p id="b9eici_27"><span class="control" id="b9eici_28">Ajouter et configurer</span> les d&eacute;pendances Maven n&eacute;cessaires pour Cucumber et son int&eacute;gration avec Spring et JUnit 5.</p></li><li class="list__item" id="b9eici_20"><p id="b9eici_29"><span class="control" id="b9eici_30">Comprendre</span> le r&ocirc;le de chaque d&eacute;pendance BDD.</p></li><li class="list__item" id="b9eici_21"><p id="b9eici_31"><span class="control" id="b9eici_32">Organiser</span> votre projet en respectant les conventions (fichiers <code class="code" id="b9eici_33">.feature</code>, classes de Steps).</p></li><li class="list__item" id="b9eici_22"><p id="b9eici_34"><span class="control" id="b9eici_35">Cr&eacute;er</span> la classe &quot;lanceur de tests&quot; (Test Runner) qui permet &agrave; JUnit d'ex&eacute;cuter les sc&eacute;narios Cucumber.</p></li><li class="list__item" id="b9eici_23"><p id="b9eici_36"><span class="control" id="b9eici_37">Lancer</span> un premier test et interpr&eacute;ter le r&eacute;sultat &quot;undefined&quot;, qui confirme que l'outillage est fonctionnel.</p></li></ul></section><section class="chapter"><h2 id="introduction-b-tir-sur-des-fondations-solides" data-toc="introduction-b-tir-sur-des-fondations-solides">Introduction : B&acirc;tir sur des fondations solides</h2><p id="b9eici_38">Imaginez que vous construisiez une maison. Passeriez-vous directement &agrave; la peinture des murs sans avoir pos&eacute; les fondations et mont&eacute; la charpente ? Probablement pas. En d&eacute;veloppement logiciel, c'est la m&ecirc;me chose. Le <code class="code" id="b9eici_40">pom.xml</code> (notre fichier de d&eacute;pendances), la structure des r&eacute;pertoires et la classe de configuration des tests sont les fondations de notre projet BDD.</p><p id="b9eici_39">Prendre le temps de bien faire cette &eacute;tape maintenant vous fera gagner des heures de d&eacute;bogage plus tard. Nous allons construire une base saine et standard, sur laquelle il sera agr&eacute;able et efficace de travailler. Alors, retroussez vos manches, ouvrez votre IDE, c'est parti !</p></section><section class="chapter"><h2 id="1-cr-ation-du-projet-spring-boot-biblioth-que" data-toc="1-cr-ation-du-projet-spring-boot-biblioth-que">1. Cr&eacute;ation du projet Spring Boot &quot;Biblioth&egrave;que&quot;</h2><p id="b9eici_41">Notre projet fil rouge est une API de gestion de biblioth&egrave;que. Nous allons le cr&eacute;er avec l'outil standard de l' &eacute;cosyst&egrave;me Spring : <code class="code" id="b9eici_44">start.spring.io</code>.</p><section class="procedure-steps"><h3 id="b9eici_42" data-toc="b9eici_42">Générer le projet initial</h3><ol class="list _decimal" id="b9eici_45" type="1"><li class="list__item" id="b9eici_46"><p id="b9eici_50">Rendez-vous sur <a href="https://start.spring.io" id="b9eici_51" data-external="true" rel="noopener noreferrer" target="_blank">https://start.spring.io</a>.</p></li><li class="list__item" id="b9eici_47"><p id="b9eici_52">Configurez le projet comme suit :</p><ul class="list _bullet" id="b9eici_53"><li class="list__item" id="b9eici_54"><p id="b9eici_59"><span class="control" id="b9eici_60">Project :</span> Maven</p></li><li class="list__item" id="b9eici_55"><p id="b9eici_61"><span class="control" id="b9eici_62">Language :</span> Java</p></li><li class="list__item" id="b9eici_56"><p id="b9eici_63"><span class="control" id="b9eici_64">Spring Boot :</span> 3.2.x ou plus r&eacute;cent</p></li><li class="list__item" id="b9eici_57"><p id="b9eici_65"><span class="control" id="b9eici_67">Project Metadata :</span></p><ul class="list _bullet" id="b9eici_66"><li class="list__item" id="b9eici_68"><p id="b9eici_74"><span class="control" id="b9eici_75">Group :</span> <code class="code" id="b9eici_76">fr.formation.spring</code></p></li><li class="list__item" id="b9eici_69"><p id="b9eici_77"><span class="control" id="b9eici_78">Artifact :</span> <code class="code" id="b9eici_79">library-management</code></p></li><li class="list__item" id="b9eici_70"><p id="b9eici_80"><span class="control" id="b9eici_81">Name :</span> library-management</p></li><li class="list__item" id="b9eici_71"><p id="b9eici_82"><span class="control" id="b9eici_83">Package name :</span> <code class="code" id="b9eici_84">fr.formation.spring.librarymanagement</code></p></li><li class="list__item" id="b9eici_72"><p id="b9eici_85"><span class="control" id="b9eici_86">Packaging :</span> Jar</p></li><li class="list__item" id="b9eici_73"><p id="b9eici_87"><span class="control" id="b9eici_88">Java :</span> 17 (ou plus r&eacute;cent)</p></li></ul></li><li class="list__item" id="b9eici_58"><p id="b9eici_89"><span class="control" id="b9eici_91">Dependencies :</span> Cliquez sur &quot;ADD DEPENDENCIES&quot; et ajoutez :</p><ul class="list _bullet" id="b9eici_90"><li class="list__item" id="b9eici_92"><p id="b9eici_96"><code class="code" id="b9eici_97">Spring Web</code> (pour cr&eacute;er des API REST)</p></li><li class="list__item" id="b9eici_93"><p id="b9eici_98"><code class="code" id="b9eici_99">Spring Data JPA</code> (pour la persistance des donn&eacute;es)</p></li><li class="list__item" id="b9eici_94"><p id="b9eici_100"><code class="code" id="b9eici_101">H2 Database</code> (une base de donn&eacute;es en m&eacute;moire, parfaite pour les tests)</p></li><li class="list__item" id="b9eici_95"><p id="b9eici_102"><code class="code" id="b9eici_103">Lombok</code> (pour r&eacute;duire le code &quot;boilerplate&quot; dans nos entit&eacute;s)</p></li></ul></li></ul></li><li class="list__item" id="b9eici_48"><p id="b9eici_104">Cliquez sur &quot;GENERATE&quot;. Un fichier <code class="code" id="b9eici_105">.zip</code> est t&eacute;l&eacute;charg&eacute;.</p></li><li class="list__item" id="b9eici_49"><p id="b9eici_106">D&eacute;compressez-le et ouvrez le projet dans votre IDE pr&eacute;f&eacute;r&eacute; (IntelliJ IDEA, Eclipse, VS Code...).</p></li></ol><ol class="list _decimal"></ol></section><p id="b9eici_43">Vous avez maintenant un projet Spring Boot standard, pr&ecirc;t &agrave; &ecirc;tre personnalis&eacute; pour le BDD.</p></section><section class="chapter"><h2 id="2-ajout-des-d-pendances-cucumber" data-toc="2-ajout-des-d-pendances-cucumber">2. Ajout des d&eacute;pendances Cucumber</h2><p id="b9eici_107">Le c&oelig;ur de notre configuration r&eacute;side dans le fichier <code class="code" id="b9eici_112">pom.xml</code>. Nous devons y ajouter les &quot;briques&quot; logicielles qui permettent &agrave; Cucumber de fonctionner et de dialoguer avec Spring.</p><p id="b9eici_108">Ouvrez votre <code class="code" id="b9eici_113">pom.xml</code> et ajoutez les d&eacute;pendances suivantes &agrave; l'int&eacute;rieur de la balise <code class="code" id="b9eici_114">&lt;dependencies&gt;</code>.</p><div class="code-block" data-lang="markup">
&lt;!-- Dépendances pour Cucumber BDD --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;
    &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;
    &lt;version&gt;7.15.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;io.cucumber&lt;/groupId&gt;
&lt;artifactId&gt;cucumber-spring&lt;/artifactId&gt;
&lt;version&gt;7.15.0&lt;/version&gt;
&lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
&lt;groupId&gt;io.cucumber&lt;/groupId&gt;
&lt;artifactId&gt;cucumber-junit-platform-engine&lt;/artifactId&gt;
&lt;version&gt;7.15.0&lt;/version&gt;
&lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</div><aside class="prompt" data-type="warning" data-title="" id="b9eici_110"><p>**&Agrave; quoi servent ces d&eacute;pendances ?** </p><ul class="list _bullet" id="b9eici_115"><li class="list__item" id="b9eici_117"><p><code class="code" id="b9eici_120">cucumber-java</code>: C'est le moteur principal de Cucumber pour Java. Il sait lire les fichiers <code class="code" id="b9eici_121">.feature</code> et chercher le code Java correspondant.</p></li><li class="list__item" id="b9eici_118"><p><code class="code" id="b9eici_122">cucumber-spring</code>: C'est la colle magique ! Elle permet &agrave; Cucumber de comprendre le contexte Spring. Gr&acirc;ce &agrave; elle, nous pourrons utiliser des annotations comme <code class="code" id="b9eici_123">@Autowired</code>, <code class="code" id="b9eici_124">@SpringBootTest</code>, ou <code class="code" id="b9eici_125">@MockBean</code> directement dans nos classes de test BDD.</p></li><li class="list__item" id="b9eici_119"><p><code class="code" id="b9eici_126">cucumber-junit-platform-engine</code>: C'est l'adaptateur qui permet &agrave; JUnit 5 (le framework de test par d&eacute;faut de Spring Boot) de d&eacute;couvrir et d'ex&eacute;cuter les sc&eacute;narios Cucumber comme s'il s'agissait de tests JUnit classiques.</p></li></ul><p> N'oubliez pas d'utiliser le <code class="code" id="b9eici_116">&lt;scope&gt;test&lt;/scope&gt;</code>, car ces d&eacute;pendances ne sont utiles que pour la phase de test, pas pour le code de production de votre application.</p></aside><p id="b9eici_111">Apr&egrave;s avoir ajout&eacute; ces d&eacute;pendances, demandez &agrave; Maven de recharger le projet (dans IntelliJ, un petit 'M' appara&icirc;t en haut &agrave; droite de l'&eacute;diteur <code class="code" id="b9eici_127">pom.xml</code>).</p></section><section class="chapter"><h2 id="3-structure-du-projet-pour-le-bdd" data-toc="3-structure-du-projet-pour-le-bdd">3. Structure du projet pour le BDD</h2><p id="b9eici_128">Une bonne organisation est la cl&eacute;. Voici la structure de r&eacute;pertoires que nous allons adopter. Elle est standard et facile &agrave; comprendre.</p><figure id="b9eici_129"><img alt="structure-des-dossiers-de-test-Structure_des_R&eacute;pertoires_de_Test.svg" src="images/structure-des-dossiers-de-test-Structure_des_Repertoires_de_Test.svg" title="structure-des-dossiers-de-test-Structure_des_R&eacute;pertoires_de_Test.svg" width="2310" height="1162"></figure><p> **En r&eacute;sum&eacute; :** </p><ul class="list _bullet" id="b9eici_130"><li class="list__item" id="b9eici_131"><p id="b9eici_133"><span class="control" id="b9eici_134"><code class="code" id="b9eici_137">src/test/resources/features</code></span>: C'est ici que vous placerez tous vos fichiers <code class="code" id="b9eici_135">.feature</code>. Le fait de les mettre dans <code class="code" id="b9eici_136">resources</code> les rend accessibles au &quot;classpath&quot; de test.</p></li><li class="list__item" id="b9eici_132"><p id="b9eici_138"><span class="control" id="b9eici_139"><code class="code" id="b9eici_141">src/test/java/fr/formation/spring/librarymanagement/bdd</code></span>: C'est ici que vous cr&eacute;erez les classes Java qui impl&eacute;mentent les &eacute;tapes Gherkin (les &quot;Step Definitions&quot;). Les organiser dans un sous-package <code class="code" id="b9eici_140">bdd</code> est une bonne pratique.</p></li></ul></section><section class="chapter"><h2 id="4-cr-ation-du-lanceur-de-tests-test-runner" data-toc="4-cr-ation-du-lanceur-de-tests-test-runner">4. Cr&eacute;ation du Lanceur de Tests (Test Runner)</h2><p id="b9eici_142">Comment JUnit sait-il qu'il doit aller chercher des fichiers <code class="code" id="b9eici_146">.feature</code> et les ex&eacute;cuter avec Cucumber ? Nous devons lui indiquer explicitement avec une classe de configuration.</p><p id="b9eici_143">Cr&eacute;ez une classe nomm&eacute;e <code class="code" id="b9eici_147">CucumberTestRunner</code> &agrave; la racine de vos sources de test (<code class="code" id="b9eici_148">src/test/java/fr/formation/spring/librarymanagement</code>).</p><div class="code-block" data-lang="java">
package fr.formation.spring.librarymanagement;

import io.cucumber.junit.platform.engine.Cucumber;

/*
 * Cette classe est le point d'entrée pour que JUnit 5
 * découvre et exécute les scénarios Cucumber.
 * L'annotation @Cucumber fait tout le travail.
 * Aucune méthode n'est nécessaire dans le corps de la classe.
 */
@Cucumber
public class CucumberTestRunner {
}
</div><p id="b9eici_145">Cette simple classe annot&eacute;e avec <code class="code" id="b9eici_149">@Cucumber</code> suffit pour l'int&eacute;gration la plus basique. Par d&eacute;faut, Cucumber va scanner l'ensemble du <code class="code" id="b9eici_150">classpath</code> &agrave; la recherche de fichiers <code class="code" id="b9eici_151">.feature</code> et des classes de &quot;glue&quot; (les Step Definitions).</p></section><section class="chapter"><h2 id="5-pr-paration-du-projet-fil-rouge" data-toc="5-pr-paration-du-projet-fil-rouge">5. Pr&eacute;paration du projet fil rouge</h2><p id="b9eici_152">Pour nos exercices, nous avons besoin de nos entit&eacute;s et de donn&eacute;es de test.</p><section class="procedure-steps"><h3 id="b9eici_153" data-toc="b9eici_153">Mise en place des entités et des données</h3><p id="b9eici_156">Ajoutez les classes suivantes dans votre package de production <code class="code" id="b9eici_158">fr.formation.spring.librarymanagement.domain</code>.</p><div class="tabs" id="b9eici_157" data-anchors="[b9eici_159,b9eici_160,b9eici_161]"><div class="tabs__content" data-gtm="tab" id="b9eici_159" data-title="Book.java"><div class="code-block" data-lang="java" data-title="Java">
package fr.formation.spring.librarymanagement.domain;

import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import lombok.Data;
import lombok.NoArgsConstructor;

// Entité représentant un livre
@Entity
@Data // Génère getters, setters, toString, etc. avec Lombok
@NoArgsConstructor // Génère un constructeur sans arguments pour JPA
public class Book {

    @Id
    private String isbn; // International Standard Book Number

    private String title;
    private String author;
    private String publisher;
    private int publicationYear;
}
</div></div><div class="tabs__content" data-gtm="tab" id="b9eici_160" data-title="BookRepository.java"><p id="b9eici_163">Cr&eacute;ez cette interface dans le package <code class="code" id="b9eici_165">fr.formation.spring.librarymanagement.repository</code>.</p><div class="code-block" data-lang="java" data-title="Java">
package fr.formation.spring.librarymanagement.repository;

import fr.formation.spring.librarymanagement.domain.Book;
import org.springframework.data.jpa.repository.JpaRepository;

// Interface pour l'accès aux données des livres
public interface BookRepository extends JpaRepository&lt;Book, String&gt; {
}
</div></div><div class="tabs__content" data-gtm="tab" id="b9eici_161" data-title="DataInitializer.java (pour les donn&eacute;es de test)"><p id="b9eici_166">Cr&eacute;ez cette classe dans un package <code class="code" id="b9eici_168">fr.formation.spring.librarymanagement.config</code>. Elle permettra d'avoir des donn&eacute;es au d&eacute;marrage de l'application.</p><div class="code-block" data-lang="java" data-title="Java">
package fr.formation.spring.librarymanagement.config;

import fr.formation.spring.librarymanagement.domain.Book;
import fr.formation.spring.librarymanagement.repository.BookRepository;
import org.springframework.boot.ApplicationArguments;
import org.springframework.boot.ApplicationRunner;
import org.springframework.stereotype.Component;

// Ce composant s'exécute au démarrage de l'application
// pour initialiser la base de données avec des données de test.
@Component
public class DataInitializer implements ApplicationRunner {

    private final BookRepository bookRepository;

    public DataInitializer(BookRepository bookRepository) {
        this.bookRepository = bookRepository;
    }

    @Override
    public void run(ApplicationArguments args) throws Exception {
        // Crée et sauvegarde le premier livre
        Book dune = new Book();
        dune.setIsbn(&quot;978-0441013593&quot;);
        dune.setTitle(&quot;Dune&quot;);
        dune.setAuthor(&quot;Frank Herbert&quot;);
        dune.setPublisher(&quot;Chilton Books&quot;);
        dune.setPublicationYear(1965);
        bookRepository.save(dune);

        // Crée et sauvegarde le deuxième livre
        Book foundation = new Book();
        foundation.setIsbn(&quot;978-0553803719&quot;);
        foundation.setTitle(&quot;Foundation&quot;);
        foundation.setAuthor(&quot;Isaac Asimov&quot;);
        foundation.setPublisher(&quot;Gnome Press&quot;);
        foundation.setPublicationYear(1951);
        bookRepository.save(foundation);
    }
}
</div></div></div><ol class="list _decimal"></ol></section><p id="b9eici_154">Notre projet est maintenant pr&ecirc;t et contient m&ecirc;me des donn&eacute;es !</p></section><section class="chapter"><h2 id="exercice-3-lancer-le-premier-test-qui-chouera" data-toc="exercice-3-lancer-le-premier-test-qui-chouera">Exercice 3 : Lancer le premier test (qui &eacute;chouera)</h2><p id="b9eici_169">Notre objectif est simple : v&eacute;rifier que toute la tuyauterie est correctement branch&eacute;e. Nous allons cr&eacute;er un fichier <code class="code" id="b9eici_177">.feature</code> et sa classe de Step Definitions (vide pour l'instant), puis lancer le test.</p><p id="b9eici_170"><span class="control" id="b9eici_178">Votre mission :</span></p><ol class="list _decimal" id="b9eici_171" type="1"><li class="list__item" id="b9eici_179"><p id="b9eici_183">Cr&eacute;ez le fichier <code class="code" id="b9eici_184">book_search.feature</code> dans <code class="code" id="b9eici_185">src/test/resources/features/</code>.</p></li><li class="list__item" id="b9eici_180"><p id="b9eici_186">Cr&eacute;ez la classe <code class="code" id="b9eici_187">BookStepDefinitions</code> dans <code class="code" id="b9eici_188">src/test/java/fr/formation/spring/librarymanagement/bdd/</code>.</p></li><li class="list__item" id="b9eici_181"><p id="b9eici_189">Lancez les tests via votre IDE (g&eacute;n&eacute;ralement en faisant un clic droit sur la classe <code class="code" id="b9eici_190">CucumberTestRunner</code> et en choisissant &quot;Run&quot;).</p></li><li class="list__item" id="b9eici_182"><p id="b9eici_191">Observez la console.</p></li></ol><p id="b9eici_172"><span class="control" id="b9eici_192">Fichier <code class="code" id="b9eici_193">book_search.feature</code>:</span></p><div class="code-block" data-lang="gherkin">
Feature: Recherche de livre par ISBN
  En tant qu'utilisateur, je veux rechercher un livre par son ISBN
  pour obtenir ses détails complets.
  
  Scenario: Recherche d'un livre existant
    Given un livre existe avec l'ISBN &quot;978-0441013593&quot;
    When l'utilisateur recherche le livre par cet ISBN
    Then les détails du livre &quot;Dune&quot; sont retournés
</div><p id="b9eici_174"><span class="control" id="b9eici_194">Classe <code class="code" id="b9eici_195">BookStepDefinitions.java</code> (initialement vide) :</span></p><div class="code-block" data-lang="java">
package fr.formation.spring.librarymanagement.bdd;

// La classe est vide pour le moment.
// Nous allons la remplir dans le prochain module.
public class BookStepDefinitions {
}
</div><p id="b9eici_176">Qu'attendez-vous comme r&eacute;sultat ? R&eacute;fl&eacute;chissez-y avant de lancer.</p></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h2 id="correction-exercice-3" data-toc="correction-exercice-3">Correction exercice 3</h2></div><div class="collapse__content"><p id="b9eici_196">Si vous avez tout configur&eacute; correctement, en lan&ccedil;ant <code class="code" id="b9eici_203">CucumberTestRunner</code>, vous ne devriez voir ni une r&eacute;ussite verte, ni une erreur rouge classique. &Agrave; la place, la console de votre IDE affichera une sortie similaire &agrave; celle-ci :</p><div class="code-block" data-lang="none">
1 scenario (1 undefined)
3 steps (3 undefined)
0m0.123s

You can implement missing steps with the snippets below:

@Given(&quot;un livre existe avec l'ISBN {string}&quot;)
public void un_livre_existe_avec_l_isbn(String string) {
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException();
}

@When(&quot;l'utilisateur recherche le livre par cet ISBN&quot;)
public void l_utilisateur_recherche_le_livre_par_cet_isbn() {
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException();
}

@Then(&quot;les détails du livre {string} sont retournés&quot;)
public void les_details_du_livre_sont_retournes(String string) {
    // Write code here that turns the phrase above into concrete actions
    throw new io.cucumber.java.PendingException();
}
</div><p id="b9eici_198"><span class="control" id="b9eici_204">Analyse du r&eacute;sultat :</span></p><p id="b9eici_199">C'est un <span class="control" id="b9eici_205">succ&egrave;s</span>! Ce r&eacute;sultat &quot;undefined&quot; (non d&eacute;fini) est exactement ce que nous voulions. Il prouve que :</p><ol class="list _decimal" id="b9eici_200" type="1"><li class="list__item" id="b9eici_206"><p id="b9eici_211">JUnit a bien trouv&eacute; et lanc&eacute; notre <code class="code" id="b9eici_212">CucumberTestRunner</code>.</p></li><li class="list__item" id="b9eici_207"><p id="b9eici_213">Cucumber a lu et compris notre fichier <code class="code" id="b9eici_214">book_search.feature</code>.</p></li><li class="list__item" id="b9eici_208"><p id="b9eici_215">Il a analys&eacute; les 3 &eacute;tapes (<code class="code" id="b9eici_216">Given</code>, <code class="code" id="b9eici_217">When</code>, <code class="code" id="b9eici_218">Then</code>).</p></li><li class="list__item" id="b9eici_209"><p id="b9eici_219">Il n'a trouv&eacute; <span class="control" id="b9eici_220">aucune m&eacute;thode Java</span> correspondant &agrave; ces phrases.</p></li><li class="list__item" id="b9eici_210"><p id="b9eici_221">Pour nous aider, il a <span class="control" id="b9eici_222">g&eacute;n&eacute;r&eacute; les &quot;snippets&quot;</span> (bouts de code) exacts que nous devons copier/coller dans notre classe <code class="code" id="b9eici_223">BookStepDefinitions</code> pour commencer &agrave; impl&eacute;menter la logique de test.</p></li></ol><p id="b9eici_201">Notre &quot;laboratoire BDD&quot; est officiellement op&eacute;rationnel !</p></div></div></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><ol class="list _decimal" id="b9eici_224" type="1"><li class="list__item" id="b9eici_226"><p id="b9eici_231"><span class="control" id="b9eici_232">Dans quel r&eacute;pertoire est-il recommand&eacute; de placer les fichiers <code class="code" id="b9eici_237">.feature</code>?</span> a) <code class="code" id="b9eici_233">src/main/java</code> b) <code class="code" id="b9eici_234">src/test/java</code> c) <code class="code" id="b9eici_235">src/main/resources</code> d) <code class="code" id="b9eici_236">src/test/resources</code></p></li><li class="list__item" id="b9eici_227"><p id="b9eici_238"><span class="control" id="b9eici_239">Quelle d&eacute;pendance Maven est cruciale pour permettre &agrave; Cucumber d'utiliser le contexte de Spring ( comme <code class="code" id="b9eici_244">@Autowired</code>) ?</span> a) <code class="code" id="b9eici_240">cucumber-java</code> b) <code class="code" id="b9eici_241">cucumber-spring</code> c) <code class="code" id="b9eici_242">cucumber-junit-platform-engine</code> d) <code class="code" id="b9eici_243">spring-boot-starter-test</code></p></li><li class="list__item" id="b9eici_228"><p id="b9eici_245"><span class="control" id="b9eici_246">Quel est le r&ocirc;le de la classe <code class="code" id="b9eici_247">CucumberTestRunner</code> annot&eacute;e avec <code class="code" id="b9eici_248">@Cucumber</code>?</span> a) Elle contient la logique de test pour chaque &eacute;tape Gherkin. b) Elle charge les donn&eacute;es de test en base. c) C'est le point d'entr&eacute;e qui permet &agrave; JUnit 5 de trouver et d'ex&eacute;cuter les tests Cucumber. d) Elle d&eacute;finit les entit&eacute;s JPA du projet.</p></li><li class="list__item" id="b9eici_229"><p id="b9eici_249"><span class="control" id="b9eici_250">Expliquez en vos propres mots pourquoi obtenir un r&eacute;sultat &quot;undefined&quot; avec des snippets de code est une &eacute;tape positive dans le processus BDD.</span></p></li><li class="list__item" id="b9eici_230"><p id="b9eici_251"><span class="control" id="b9eici_252">Si vous oubliez la d&eacute;pendance <code class="code" id="b9eici_253">cucumber-junit-platform-engine</code>, que se passera-t-il probablement lorsque vous essaierez de lancer vos tests depuis votre IDE ?</span></p></li></ol></section><section class="chapter"><h2 id="conclusion-de-ce-deuxi-me-chapitre" data-toc="conclusion-de-ce-deuxi-me-chapitre">Conclusion de ce deuxi&egrave;me chapitre</h2><p id="b9eici_254">Excellent travail ! Vous avez assembl&eacute; toutes les pi&egrave;ces du puzzle. Vous &ecirc;tes parti d'une page blanche pour arriver &agrave; un projet Spring Boot enti&egrave;rement configur&eacute; pour le D&eacute;veloppement Guid&eacute; par le Comportement.</p><p id="b9eici_255">Vous savez maintenant comment structurer un projet BDD, quelles d&eacute;pendances sont n&eacute;cessaires et comment les faire fonctionner ensemble. Plus important encore, vous avez ex&eacute;cut&eacute; votre premier test et compris que la sortie &quot;undefined&quot; de Cucumber n'est pas une erreur, mais une invitation &agrave; coder, un guide pour les prochaines &eacute;tapes.</p><p id="b9eici_256">Vous avez les fondations, la charpente, et m&ecirc;me un plan de travail g&eacute;n&eacute;r&eacute; automatiquement. Dans le prochain module, nous allons enfin passer &agrave; l'action : nous allons prendre ces snippets, les int&eacute;grer dans notre code, et &eacute;crire notre premier sc&eacute;nario de test BDD complet, de bout en bout, en suivant le fameux cycle &quot;Red-Green-Refactor&quot;. L'aventure ne fait que commencer</p></section><div class="last-modified">18 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="001-01-more-on-bdd.html" class="navigation-links__prev">Chapitre 1 : Les Fondations du BDD - Pour aller plus loin</a><a href="empty-md-003-00-first-bdd-test.html" class="navigation-links__next">Chapitre 3 : Premier Sc&eacute;nario BDD de A &agrave; Z : &quot;Hello, BDD!&quot;</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>